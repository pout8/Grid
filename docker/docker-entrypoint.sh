#!/bin/bash
set -e

echo "=============================================="
echo "GridBNB äº¤æ˜“ç³»ç»Ÿ - å®¹å™¨å¯åŠ¨è„šæœ¬"
echo "=============================================="

# æ£€æŸ¥æ•°æ®åº“æ˜¯å¦éœ€è¦åˆå§‹åŒ–
echo "æ£€æŸ¥æ•°æ®åº“æ˜¯å¦éœ€è¦åˆå§‹åŒ–..."

if [ ! -f "/app/data/trading_system.db" ]; then
    echo "ğŸ“Š æ•°æ®åº“ä¸å­˜åœ¨ï¼Œæ­£åœ¨åˆå§‹åŒ–..."
    python scripts/init_database.py
    echo "âœ“ æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ"
else
    echo "âœ“ æ•°æ®åº“å·²å­˜åœ¨ï¼Œè·³è¿‡åˆå§‹åŒ–"
fi

echo ""
echo "ğŸš€ å¯åŠ¨ FastAPI æœåŠ¡..."
echo "=============================================="

# å¯åŠ¨ FastAPI æœåŠ¡
exec python -m src.services.fastapi_server
